package com.tcs.hibernate;

import java.util.ArrayList;

import javax.transaction.Transaction;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

public class MainClass {

	public static void main(String[] args) {
		Configuration configure =new Configuration(); 
configure =configure.configure(); 
	SessionFactory factory=configure.buildSessionFactory(); 
	System.out.println(factory); 
Session session =factory.openSession(); 
	System.out.println(session);
	
	Transaction transaction =session.beginTransaction(); 
	 
ArrayList<Transaction1> transactions = new ArrayList(); 
	ArrayList<Investor1> investors = new ArrayList(); 
	 
	    Transaction1 trn1=session.get(Transaction1.class, 1); 
	    Transaction1 trn2=session.get(Transaction1.class, 2); 
	    Transaction1 trn3=session.get(Transaction1.class, 3); 
	    Transaction1 trn4=session.get(Transaction1.class, 4); 
	    Transaction1 trn5=session.get(Transaction1.class, 5); 
	    transactions.add(trn1); 
	    transactions.add(trn2); 
	    transactions.add(trn3); 
	    transactions.add(trn4); 
	    transactions.add(trn5); 
	 
	 
	Investor1 inv1 =session.get(Investor1.class, 1); 
	Investor1 inv2 =session.get(Investor1.class, 2); 
	Investor1 inv3 =session.get(Investor1.class, 3); 
	Investor1 inv4 =session.get(Investor1.class, 4); 
	Investor1 inv5 =session.get(Investor1.class, 5); 
	 
	investors.add(inv1); 
	investors.add(inv2); 
	investors.add(inv3); 
	investors.add(inv4); 
	investors.add(inv5); 
	 
	 
	for(Investor1 i:investors) { 
	 
	double bal1=0.0; 
	for(Transaction1 t:transactions) { 
	if(i.getId()==t.getInvestorId()) { 
	bal1=i.getAmount()-t.getTranAmount(); 
	}
	} 
i.setAmount(bal1); 
session.update(i); 
	 
	}
	 
	transaction.commit(); 
	session.close(); 

	  

	  }
}
